# 不可变集合

不可变集合（Immutable Collections）是指一旦创建后就不能被修改的集合。

不可变集合在**多线程环境**下非常有用，因为它们天生是线程安全的，同时也避免了意外的修改。

<br>

在 **Java 8** 及之前的版本中，可以通过 `Collections` 工具类的 `unmodifiableXXX()` 方法将可变集合转换为不可变集合。

```java
// 创建一个可变集合
List<String> mutableList = new ArrayList<>();
mutableList.add("Apple");
mutableList.add("Banana");
mutableList.add("Cherry");

// 转换为不可变集合
List<String> immutableList = Collections.unmodifiableList(mutableList);
```

!!!warning "注意"
    这种方法创建的不可变集合是对原始集合的**视图**，如果原始集合被修改，不可变集合的内容也会随之改变。

<br>

从 **Java 9** 开始，Java 提供了更简洁的工厂方法来创建不可变集合。(**推荐**)

```java
// 创建不可变 List
List<String> immutableList = List.of("Apple", "Banana", "Cherry");

// 创建不可变 Set
Set<String> immutableSet = Set.of("Apple", "Banana", "Cherry");

// 创建不可变 Map
Map<String, Integer> immutableMap = Map.of("Apple", 1, "Banana", 2, "Cherry", 3);
// Map.of()具有长度限制10，可使用Map.ofEntries()，或者JDK10以上Map.copyOf()
```

!!!warning "注意"
    - `List.of()`、`Set.of()` 和 `Map.of()` 创建的集合是完全不可变的，且与原始集合无关。
    - 这些方法不接受 `null` 值，如果传入 `null`，会抛出 `NullPointerException`。


---

**完**